services:
  peertalk-dev:
    # Use pre-built image from GitHub Container Registry
    # To build locally instead: docker compose build
    image: ghcr.io/matthewdeaves/peertalk-dev:develop
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: peertalk-dev
    volumes:
      # Mount project directory
      - ..:/workspace
      # Persist Python venv across container restarts
      - peertalk-venv:/workspace/tools/.venv
    environment:
      - RETRO68=/opt/Retro68-build/toolchain
    working_dir: /workspace
    stdin_open: true
    tty: true

volumes:
  peertalk-venv:

# docker-compose.yml for PeerTalk POSIX discovery testing

services:
  alice:
    image: peertalk-test
    container_name: peertalk-alice
    command: ["/app/test_integration_full", "Alice", "sender"]
    tty: true
    stdin_open: true
    networks:
      peertalk_test_net:
        ipv4_address: 192.168.200.2

  bob:
    image: peertalk-test
    container_name: peertalk-bob
    command: ["/app/test_integration_full", "Bob", "both"]
    tty: true
    stdin_open: true
    networks:
      peertalk_test_net:
        ipv4_address: 192.168.200.3

  charlie:
    image: peertalk-test
    container_name: peertalk-charlie
    command: ["/app/test_integration_full", "Charlie", "receiver"]
    tty: true
    stdin_open: true
    networks:
      peertalk_test_net:
        ipv4_address: 192.168.200.4

networks:
  peertalk_test_net:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.200.0/24
